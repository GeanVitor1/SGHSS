@using Selecao.MVC.Models
@model Selecao.MVC.Models.SelecaoCandidatoViewModel
<table class="table" id="tbCandidatos">
    <thead class="text-center thead-sticky-0">
        <tr>
            <th></th>
            <th class="thCodigo">Código</th>
            <th class="thNome">Nome</th>
            <th class="thIdade" style="display: none;">Idade</th>
            <th class="thBairro" style="display: none;">Bairro</th>
            <th><i class="fas fa-cog ms-2 c-pointer" title="Exibir Colunas" data-bs-toggle="modal" data-bs-target="#configurarTabela"></i></th>
        </tr>
    </thead>
    <tbody>
            @for (var i = 0; i < Model.Candidatos.Count; i++)
            {
                var idadeDescrita = "";
                if (Model.Candidatos[i].DataNascimento != null && Model.Candidatos[i].DataNascimento != DateTime.MinValue)
                {
                    int idade = DateTime.Now.Year - Model.Candidatos[i].DataNascimento.Year;

                    if (DateTime.Now < Model.Candidatos[i].DataNascimento.AddYears(idade))
                        idade--;

                    idadeDescrita = $"{idade} anos";
                }
                <tr>
                    <td>
                        <input type="hidden" asp-for="@Model.Candidatos[i].Id" />
                        <input type="checkbox" class="form-check-input" asp-for="@Model.Candidatos[i].IsSelected" role="button" />
                    </td>

                    <td class="tdCodigo">@Model.Candidatos[i].Id.ToString("D11")</td>

                    <td class="tdNome">@Model.Candidatos[i].Nome</td>

                    <td class="tdIdade" style="display: none;">@idadeDescrita</td>

                    <td class="tdBairro" style="display: none;">@Model.Candidatos[i].Bairro</td>

                    <td class="text-center">
                        <div class="form-button-action">
                            <i class="fas fa-newspaper text-sencondary mt-1 c-pointer" title="Curriculo" onclick="verCurriculo('@Model.Candidatos[i].Id')"></i>
                        </div>
                    </td>
                </tr>
            }
    </tbody>
</table>

<div class="modal" id="modalCurriculo" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content" id="dadoCurriculo">
        </div>
    </div>
</div>